# CURSOR.MD

**Создай полнофункциональное веб-приложение "AI Quiz Platform" для проведения онлайн-викторин с реальным временем, авторизацией, таймерами, WebSocket-обновлениями, QR-кодом для входа, анимированным фоном и продакшн-деплоем через Docker и Nginx с SSL.**

---

## Требования к архитектуре

- **Backend:** FastAPI (Python 3.11+), асинхронный, JWT-авторизация, WebSocket для real-time, таймеры на asyncio, хранение состояния в памяти.
- **Frontend:** React 18+, Vite, React Router, современный UI, анимированный фон с резиновыми утками (SVG, CSS-анимация), поддержка мобильных устройств.
- **DevOps:** Docker, Docker Compose, Nginx (SSL через Let's Encrypt), bash-скрипты для деплоя, автоматизация сборки и обновления, хранение секретов через .env или export-скрипт.
- **Безопасность:** .gitignore для секретов, отдельный SECURITY.md с рекомендациями.
- **Документация:** README.md с инструкциями по запуску, деплою, разработке, NGINX_DEPLOY.md с подробностями по серверу.

---

## Функционал

### Backend (FastAPI)
- Регистрация пользователей с уникальным именем (латиница/кириллица/цифры/пробел/точка).
- JWT-авторизация (выдача токена при регистрации, проверка токена для ответов).
- Стадии комнаты: registration, preparation, quiz, pause, results, waiting.
- Таймеры для каждой стадии (асинхронно, без блокировок).
- Генерация вопросов из пула (5 случайных, с темой, вариантами, правильным ответом).
- Прием ответов, начисление баллов (чем быстрее — тем больше).
- Лидерборд.
- WebSocket-роут для real-time обновлений состояния комнаты.
- QR-код (PNG) с ссылкой на главную страницу (использовать домен, не IP).
- Fallback для SPA (index.html для всех не-API/WS путей).
- Логирование событий старта и ошибок.
- Healthcheck endpoint.

### Frontend (React)
- Страницы: регистрация, комната, викторина, результаты.
- Автоматическая маршрутизация по стадии комнаты.
- Хранение токена и имени пользователя в localStorage.
- Проверка валидности токена при старте.
- WebSocket-подключение (wss:// если https, ws:// если http).
- Синхронизация таймера и текущего вопроса с сервером.
- Анимированный фон: SVG-утки, плавающие по экрану, с циклической и скролл-анимацией.
- QR-код для входа на мобильном.
- UI/UX: адаптивность, современный дизайн, кастомные шрифты, meta-теги для PWA.
- Кэширование статики с версионированием (чтобы обновления фронта не ломались из-за кэша).

### DevOps/Инфраструктура
- Dockerfile: multi-stage build (frontend → backend → финальный образ).
- docker-compose.yml для локального запуска.
- Nginx: SSL (Let's Encrypt), редирект http→https, проксирование API и WS, отдача статики, кэширование, security headers.
- Bash-скрипты: сборка, деплой, обновление, получение SSL, тест соединения, экспорт секретов.
- .gitignore: node_modules, __pycache__, .env, export-secrets.sh, сертификаты, логи.
- SECURITY.md: рекомендации по хранению секретов, best practices.
- README.md: быстрый старт, dev/prod режимы, команды Docker, описание архитектуры.
- NGINX_DEPLOY.md: пошаговая инструкция по деплою на VPS, настройке домена, SSL, обновлению.

---

## Пример запроса для Cursor AI

> Создай приложение "AI Quiz Platform" с FastAPI backend (асинхронный, JWT, WebSocket, таймеры, генерация вопросов, QR-код, healthcheck), React frontend (автоматическая маршрутизация по стадиям, WebSocket, хранение токена, анимированный фон с SVG-утками, адаптивный дизайн, QR-код), Dockerfile (multi-stage), docker-compose, Nginx (SSL, прокси, кэширование), bash-скрипты для деплоя и обновления, .gitignore, SECURITY.md, README.md и подробную инструкцию по деплою на VPS с доменом и Let's Encrypt. Все секреты должны храниться вне гита через export-secrets.sh. Приложение должно быть готово к продакшн-деплою и работать по адресу https://<мой_домен>.

---

**Этот prompt можно использовать для полного воссоздания проекта в Cursor AI.** 